try {
    const existingProfile = await HealthProfile.findOne({ userId: req.userId });

    if (existingProfile) {
      Object.assign(existingProfile, req.body);
      await existingProfile.save();
      return res.json({ success: true, profile: existingProfile });
    }

    const profile = new HealthProfile({ ...req.body, userId: req.userId });
    await profile.save();

    res.status(201).json({ success: true, profile });
  } catch (error) {
    console.error(error);
    res.status(400).json({ success: false, message: error.message });  }
};